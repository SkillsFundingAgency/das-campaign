@using System.Web
@using Sfa.Das.Sas.Shared.Components.ViewComponents.Fat.SearchResults;
@model Sfa.Das.Sas.Shared.Components.ViewModels.TrainingProvider.Search.TrainingProviderSearchViewModel
@{
    ViewBag.Title = "Training provider results";
    ViewBag.MetaTitle = "Training provider results";
    ViewBag.PageID = "employer-find-an-apprenticeship";
    ViewBag.Section = "employer";
    ViewBag.MetaDesc = "";
    ViewBag.PageUrl = "/TrainingProvider/Search?Postcode=" +  HttpUtility.UrlEncode(Context.Request.Query["Postcode"]) + "&IsLevyPayer=" + HttpUtility.UrlEncode(Context.Request.Query["IsLevyPayer"]) + "&ApprenticeshipId=" + HttpUtility.UrlEncode(Context.Request.Query["ApprenticeshipId"]);
    Layout = "_LayoutContentSidebar";
    ViewBag.PageNavIndex = 3;

}

@section HeroHeading {
    @await Component.InvokeAsync("TrainingProviderHeading", new { queryModel = Model, title = ViewBag.Title })
}


@await Component.InvokeAsync("TrainingProviderSearchResults", new { searchQueryModel = Model })


@section Sidebar{
    <div class="sidebar-panel sidebar-panel--dark">
        <div class="sidebar-panel__content">
            <h2 class="heading-m u-!-margin-top-0">Find a training provider for this apprenticeship</h2>
            @await Component.InvokeAsync("TrainingProviderSearch", new { apprenticeshipId = Model.ApprenticeshipId })
            @await Component.InvokeAsync("TrainingProviderSearchFilter", new { searchQueryModel = Model })
        </div>
    </div>

}