@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model Sfa.Das.Sas.Shared.Components.ViewModels.Fat.SearchFilter.FatSearchFilterViewModel


<form asp-controller="Fat" asp-action="Search" method="get" data-fiu-search-filter="true">
    <h3 class="govuk-heading-s fiu-search-filter__title">Filter results</h3>
    <fieldset class="govuk-fieldset fiu-search-filter__fieldset">
        <legend class="govuk-fieldset__legend fiu-search-filter__legend">Apprenticeship level:</legend>
        <div class="govuk-checkboxes govuk-checkboxes--small fiu-checkboxes--inline">
            @foreach (var item in Model.LevelsAggregate.OrderBy(m => m.Value))
            {
                <div class="govuk-checkboxes__item fiu-search-filter__checkbox-item">
                    <input class="govuk-checkboxes__input fiu-search-filter__checkbox" value="@item.Value" id="SelectedLevels_@(item.Value)" name="SelectedLevels" type="checkbox" @Html.Raw(item.Checked ? "checked" : "") @Html.Raw(item.Count == 0 ? "disabled" : "") />
                    <label for="SelectedLevels_@(item.Value)" class="govuk-label govuk-checkboxes__label fiu-search-filter__label @Html.Raw(item.Count == 0 ? "fiu-label--disabled" : "")"><b>Level @item.Value</b> (@item.Count)</label>
                </div>
            }
        </div>
    </fieldset>

    <input type="hidden" asp-for="Keywords" />
    <input type="hidden" asp-for="SortOrder" />
    <input type="hidden" asp-for="ResultsToTake" />

    <button type="submit" class="fiu-button fiu-button--employers fiu-search-filter__button" id="fat-filter-update-results">
        Update results
    </button>

</form>